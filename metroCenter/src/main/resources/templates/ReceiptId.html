<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>国家海洋局东海分局办公系统</title>
    <link rel="icon" href="img/owl1.ico" type="image/x-icon">

    <link rel="Bookmark" href="img/owl1.ico" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- basic styles -->
    <script th:replace="header :: header"></script>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->

    <script src="/assets/js/ace-extra.min.js"></script>
    <!--文件上传控件样式-->
    <style scoped>
        .file-icon
        {
            display: inline-block;
            float: left;
            width: 48px;
            height: 48px;
            margin-left: 10px;
            margin-top: 13.5px;
        }

        .img-file { background-image: url(/img/jpg.png) }
        .doc-file { background-image: url(/img/doc.png) }
        .pdf-file { background-image: url(/img/pdf.png) }
        .ppt-file {background-image:  url(/img/ppt.png) }
        .xls-file { background-image: url(/img/xls.png) }
        .zip-file { background-image: url(/img/zip.png) }
        .default-file { background-image: url(/img/default.png) }

        #example .file-heading
        {
            font-family: Arial;
            font-size: 1.1em;
            display: inline-block;
            float: left;
            width: 450px;
            margin: 0 0 0 20px;
            height: 25px;
            -ms-text-overflow: ellipsis;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
            overflow:hidden;
            white-space:nowrap;
        }

        #example .file-name-heading
        {
            font-weight: bold;
        }

        #example .file-size-heading
        {
            font-weight: normal;
            font-style: italic;
        }

        li.k-file .file-wrapper .k-upload-action
        {
            position: absolute;
            top: 0;
            right: 0;
        }

        li.k-file div.file-wrapper
        {
            position: relative;
            height: 75px;
        }
    </style>









    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

    <!--[if lt IE 9]>
    <script src="/assets/js/html5shiv.js"></script>
    <script src="/assets/js/respond.min.js"></script>

    <![endif]-->
   <!-- <link rel="stylesheet" href="assets/css/myTableCSS/myTableCSS.css"/>-->
</head>

<body>
<script type="text/javascript" th:inline="javascript">
    var instanceId=[[${instanceId}]];//流程实例编号
</script>
<div th:replace="navbar :: navbar(${user})"></div>

<div class="main-container" id="main-container">
    <script type="text/javascript">
    try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script>
    <div class="main-container-inner">
       <a class="menu-toggler" id="menu-toggler" href="#">
       <span class="menu-text"></span>
      </a>
       <div th:replace="slider :: slidermenu(${'dbzx'})"></div>
       <div class="main-content">
            <div class="breadcrumbs" id="breadcrumbs">
    <script type="text/javascript">
        try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
    </script>

    <ul class="breadcrumb">
        <li>
            <i class="icon-home home-icon"></i>
            <a href="#">首页</a>
        </li>
        <li class="active">控制台</li>
    </ul><!-- .breadcrumb -->

    <div class="nav-search" id="nav-search">
        <form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="搜索..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="icon-search nav-search-icon"></i>
								</span>
        </form>
    </div><!-- #nav-search -->
</div>
            <div class="page-content">
   <div class="page-header">
    <h1>
        流程
        <small>
            <i class="icon-double-angle-right"></i>
            收文
        </small>
          </h1>

</div>

                    <form id="receiveForm" action="#" >

                         <!--办公室登记-->
                         <div id="registerDiv" th:if="${#lists.contains(editControl,'registerDiv')}" class="row" style="height:200px">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>办公室登记</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div style="height:45px;width:40%;float:left">
                                                 <label class="blue">
                                                     <span class="lbl" >公文标题： </span >
                                                 </label>
                                                 <input style="width:300px;margin-left:60px;font-size:15px" id="missiveTitle" name="missiveTitle" class="k-textbox" required validationMessage="请输入公文标题" />

                                             </div>
                                             <div style="margin-left:75%;height:45px">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>

                                             <div style="height:45px">
                                                 <label class="blue">
                                                     <span class="lbl" >公文种类： </span >
                                                 </label>

                                                 <input style="width:300px;margin-left:60px;height:35px" id="missiveType" name="missiveType" required validationMessage="请选择公文种类" />
                                             </div>

                                             <div style="height:45px">
                                                 <label class="blue" style="float:left">
                                                     <span class="lbl" >选择拟办人： </span >
                                                 </label>
                                                 <select style="width:300px;margin-left:136px;height:35px" id="selectToDo" name="taskDealPerson" required validationMessage="请选择执行人"></select>
                                             </div>

                                             <div id="modifyDiv" style="display: none;">
                                                 <div style="width:10%;float:left">
                                                     <label class="blue">
                                                         <span class="lbl" >审核修改意见： </span >
                                                     </label>
                                                 </div>
                                                 <div>
                                                     <label id="modifyContentL" style="width:900px;height:80px;border:1px"></label>
                                                 </div>
                                             </div>


                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <!--办公室拟办-->
                         <div id="officeToDoDiv" th:if="${#lists.contains(editControl,'officeToDoDiv')}" class="row" style="height:100px">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>办公室拟办</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div style="width:15%;float:left">
                                                 <label class="blue">
                                                     <span class="lbl" >选择办公室审核人： </span >
                                                 </label>
                                             </div>

                                             <div  style="margin-left:15%;width:50%;float:left">
                                                 <select style="width:200px" id="selectChecker" name="taskDealPerson"  required validationMessage="请选择执行人"></select>
                                             </div>
                                             <div style="margin-left:75%">
                                             <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <!--办公室拟办修改信息-->
                         <div id="modifyToDoDiv" th:if="${#lists.contains(editControl,'modifyToDoDiv')}" class="row" style="height:50px;display:none">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>修改办公室拟办内容</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                                 <div style="width:15%;float:left">
                                                     <label class="blue">
                                                         <span class="lbl" >审核修改意见： </span >
                                                     </label>
                                                 </div>
                                                 <div>
                                                     <label id="toDoModifyContentL" style="width:900px;height:80px;border:1px"></label>
                                                 </div>
                                             </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <!--办公室审核-->
                         <div id="checkDiv" th:if="${#lists.contains(editControl,'checkDiv')}" class="row" style="height:240px">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>办公室主任审核</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main" style="height:200px;">
                                             <div style="width:150px;float:left">
                                                    <label class="blue">
                                                     <input  name="passor"
                                                             onclick="$('#selectFirstLeader').data('kendoMultiSelect').enable(true);$('#selectDisposer').data('kendoMultiSelect').enable(true);$('#regModifyContent').attr('style','display:none;margin-left:160px');$('#toDoModifyContent').attr('style','display:none;margin-left:160px');$('#toDoModifyContentT').val('  ');$('#regModifyContentT').val('  ')"
                                                             id="checkPass" checked value="CheckComp" type="radio"  class="ace" >
                                                     <span class="lbl" > 通过审核</span >
                                                 </label>
                                                       <hr/>
                                                    <label class="blue">
                                                         <input id="modifyRegister" onclick="$('#selectFirstLeader').data('kendoMultiSelect').enable(false);$('#selectDisposer').data('kendoMultiSelect').enable(false);$('#regModifyContent').attr('style','position:absolute;top:127px;left:200px');$('#toDoModifyContent').attr('style','display:none');
$('#toDoModifyContentT').val('  ');"  name="passor" value="BackRegiste" type="radio" class="ace">
                                                         <span class="lbl"> 修改登记</span><br>
                                                     </label>
                                                       <hr/>
                                                    <label class="blue">
                                                         <input id="modifyToDo"  onclick="$('#selectFirstLeader').data('kendoMultiSelect').enable(false);$('#selectDisposer').data('kendoMultiSelect').enable(false);$('#toDoModifyContent').attr('style','position:absolute;top:127px;left:200px');$('#regModifyContent').attr('style','display:none');
                                                         $('#regModifyContentT').val('  ');"  name="passor" value="BackHandle" type="radio" class="ace">
                                                         <span class="lbl"> 修改拟办</span><br>
                                                     </label>

                                              </div>
                                             <div style="margin-left:180px;height:160px">

                                                  <div id="shenhe"style="float:left" >
                                                     <select style="width:200px;float:left;margin-left:65px" id="selectFirstLeader" name="taskDealPerson" required validationMessage="执行人不能为空！"></select>
                                                     <select style="width:200px;margin-left:50px;float:left" id="selectDisposer" name="taskDealPerson" required validationMessage="执行人不能为空"></select>
                                                      <div></div>
                                                  </div>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                                  <div style="display:none" id="regModifyContent">
                                                      <label class="blue">修改意见:</label>
                                                      <textarea  cols="61" rows="6"  required validationMessage="修改意见不能为空！" name="regModifyContent" id="regModifyContentT">  </textarea>
                                                  </div>
                                                  <div style="display:none" id="toDoModifyContent">
                                                      <label class="blue" style="position:absolute;top:65px">修改意见:</label>
                                                      <textarea style="margin-left: 70px" cols="61" rows="6"  required validationMessage="修改意见不能为空！" name="toDoModifyContent" id="toDoModifyContentT">  </textarea>
                                                  </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                         </div>
                         </div>
                         <label th:unless="${#lists.contains(editControl,'checkDiv')}"></label>
                         <!--领导批示-->
                         <div id="leaderSignDiv" th:if="${#lists.contains(editControl,'leaderSignDiv')}" style="height:170px" class="row">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>领导批示</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div>
                                                 <label class="blue" style="float:left"></label>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>

                         <!--办公室处理-->
                         <div id="officeHandler" th:if="${#lists.contains(editControl,'officeHandler')}" style="height:170px" class="row">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>办公室处理</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div>
                                                 <label class="blue" style="float:left">
                                                     <input  name="passor" value="SignComp" type="radio" class="ace" checked onclick="$('#selectNextLeader').data('kendoMultiSelect').enable(false);$('#selectFirstLooker').data('kendoMultiSelect').enable(true);$('#selectAfterLook').data('kendoMultiSelect').enable(true);" />
                                                     <span class="lbl" > 转至阅办</span >
                                                 </label>
                                                 <select style="width:200px;margin-left:70px;float:left" id="selectFirstLooker" name="taskDealPerson" required validationMessage="执行人不能为空！"></select>
                                                 <select style="width:200px;margin-left:45px;float:left" id="selectAfterLook" name="taskDealPerson" required validationMessage="执行人不能为空！" ></select>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                              </div>
                                             <hr/>
                                              <div>
                                                 <label class="blue" style="float:left">
                                                     <input  name="passor" value="NeedSign"  type="radio" class="ace" onclick="$('#selectNextLeader').data('kendoMultiSelect').enable(true);$('#selectFirstLooker').data('kendoMultiSelect').enable(false);$('#selectAfterLook').data('kendoMultiSelect').enable(false);">
                                                     <span class="lbl"> 继续批示</span><br>
                                                 </label>
                                                 <select style="margin-left:150px;width:200px" id="selectNextLeader" name="taskDealPerson" required validationMessage="执行人不能为空！"></select>

                                             </div>



                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <!--阅办人签字-->
                         <div id="lookerSignDiv" th:if="${#lists.contains(editControl,'lookerSignDiv')}" style="height:170px" class="row">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>阅办人签字</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div>
                                                 <label class="blue" style="float:left"></label>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <!-- 阅办后处理-->
                         <div id="handlerDiv" th:if="${#lists.contains(editControl,'handlerDiv')}" style="height:180px" class="row">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>阅办后处理</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body" >
                                         <div class="widget-main" style="height:145px">
                                             <div>
                                                 <label class="blue" style="float:left">
                                                     <input  name="passor" value="ReadoComp" checked onclick="$('#selectFirstUndertaker').data('kendoMultiSelect').enable(true);$('#selectNextLooker').data('kendoMultiSelect').enable(false);" type="radio" class="ace" >
                                                     <span class="lbl" > 开始承办</span >
                                                 </label>
                                                 <select style="margin-left:70px;width:200px;float:left" id="selectFirstUndertaker"  name="taskDealPerson" required validationMessage="执行人不能为空！"></select>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                             </div>
                                             <hr/>
                                             <div>
                                                 <label class="blue" style="float:left">
                                                     <input  name="passor" value="NeedReado" onclick="$('#selectFirstUndertaker').data('kendoMultiSelect').enable(false);$('#selectNextLooker').data('kendoMultiSelect').enable(true);" type="radio" class="ace">
                                                     <span class="lbl"> 继续阅办</span><br>
                                                 </label>
                                                 <select style="margin-left:150px;width:200px" id="selectNextLooker"  name="taskDealPerson" required validationMessage="执行人不能为空！"></select>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <label th:unless="${#lists.contains(editControl,'handlerDiv')}"></label>
                         <!--承办后处理-->
                         <div id="undertakeDiv" th:if="${#lists.contains(editControl,'undertakeDiv')}" style="height:180px" class="row">
                             <div class="col-xs-12 col-sm-12">
                                 <div class="widget-box">
                                     <div class="widget-header">
                                         <h4>承办后处理</h4>

                                                                        <span class="widget-toolbar">


                                                                            <a href="#" data-action="collapse">
                                                                                <i class="icon-chevron-up"></i>
                                                                            </a>

                                                                        </span>
                                     </div>
                                     <div class="widget-body">
                                         <div class="widget-main">
                                             <div >
                                                 <label class="blue"style="float:left">
                                                     <input  name="passor" value="NeedUndertakeDispose" type="radio" onclick="$('#selectNextUndertaker').data('kendoMultiSelect').enable(true);" class="ace"  checked>
                                                     <span class="lbl" > 继续承办</span >
                                                 </label>
                                                 <select id="selectNextUndertaker"  name="taskDealPerson" style="width:200px;margin-left:150px;float:left" required validationMessage="执行人不能为空！"></select>
                                                 <div style="margin-left:75%;">
                                                     <a th:href=@{/historyProcess/{instanceId}(instanceId=${instanceId})} class="btn btn-min bigger btn-success" ><i class="icon-check"></i>任务信息</a>
                                                 </div>
                                             </div>
                                             <hr/>
                                             <div>
                                                 <label class="blue">
                                                     <input name="passor" value="UndertakeDisposeComp" type="radio"onclick="$('#selectNextUndertaker').data('kendoMultiSelect').enable(false);"  class="ace">
                                                     <span class="lbl"> 结束流程</span><br>
                                                 </label>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <!-- PAGE CONTENT ENDS -->
                             </div>
                         </div>
                         <label th:unless="${#lists.contains(editControl,'undertakeDiv')}"></label>
                         <!--收文阅办卡-->
                         <div style=" width:891px;height:1260px;background-image:url('/img/MissiveReceive.png')">
                          <div id="missiveReceive" style="position:absolute;width:891px;height:1260px;">
                                       <div id="signatureDiv" class="" style="position: absolute;top: 100px;left: -100px;height:800px;width:100px"></div>
                                        <!--收文年月日-->
                                        <div id="receiveYear" name="receiveYear" th:if="${#lists.contains(editControl, 'receiveYear')}"
                                             style="font-size:22px;position:absolute;top:95px;left:335px;width:60px;height:30px;"></div>
                                        <label id="receiveYears"
                                             th:unless="${#lists.contains(editControl,'receiveYear')}" style="font-size:22px;position:absolute;top:95px;left:335px;width:60px;height:30px;"></label>
                                        <div id="receiveMonth" name="receiveMonth" th:if="${#lists.contains(editControl, 'receiveMonth')}"
                                             style="font-size:22px;position:absolute;top:95px;left:425px;width:30px;height:30px;"></div>
                                        <lablel id="receiveMonths" th:unless="${#lists.contains(editControl,'receiveMonth')}"
                                             style="font-size:22px;position:absolute;top:95px;left:425px;width:30px;height:30px;" ></lablel>
                                        <div id="receiveDay" name="receiveDay" th:if="${#lists.contains(editControl,'receiveDay')}"
                                             style="font-size:22px;position:absolute;top:95px;left:475px;width:30px;height:30px;"></div>
                                        <label id="receiveDays"th:unless="${#lists.contains(editControl,'receiveDay')}"
                                             style="font-size:22px;position:absolute;top:95px;left:475px;width:30px;height:30px;"></label>

                                        <!--收文号-->
                                        <div style="position:absolute;top:94px;left:670px;">
                                            <input id="M_receiveNum"  required validationMessage="请输入收文号"
                                                   th:if="${#lists.contains(editControl,'M_receiveNum')}" name="M_receiveNum" type="text" style="font-size:24px;;width:170px;height:35px"/>
                                            <label id="M_receiveNums" th:unless="${#lists.contains(editControl,'M_receiveNum')}" style="font-size:24px;margin-left:25px;margin-bottom: 10px"></label>
                                        </div>


                                        <!-- 文件字号-->
                                        <div id="file">
                                            <input id="missiveNum" type="text"  name="missiveNum" class="k-textbox"  th:if="${#lists.contains(editControl,'missiveNum')}"  style="position:absolute;font-size:24px;top:142px;left:275px;font-size:20px;width:370px;height:35px;" />
                                            <div>
                                            <label id="missiveNums" name="missiveNums" th:unless="${#lists.contains(editControl,'missiveNum')}"  style="position:absolute;font-size:24px;top:142px;left:275px;font-size:22px;width:402px;height:45px"></label>
                                            </div>
                                        </div>

                                         <!--文件份数-->
                                        <div id="fileCount" >
                                            <input id="missiveCount" name="missiveCount" type="number" th:if="${#lists.contains(editControl,'missiveCount')}"  style="position:absolute;font-size:24px;top:141px;left:690px;font-size:15px;width:100px;height:35px;" value="1" min="1"  step="1" />
                                            <label id="missiveCounts"  name="missiveCounts" th:unless="${#lists.contains(editControl,'missiveCount')}" style="position:absolute;font-size:24px;border-style:none;top:142px;left:690px;margin-left:40px;width:70px;height:45px"></label>
                                        </div>

                                        <!--紧急程度-->
                                        <div id="emergencyLevelDiv" style="font-size:15px;position:absolute;left:150px;top:194px;" >
                                             <div id="emergencyLevel" name="emergencyLevel" th:if="${#lists.contains(editControl,'emergencyLevel')}"  style="width:160px;height:35px"></div>
                                            <label th:unless="${#lists.contains(editControl,'emergencyLevel')}" id="emergencyLevels" name="emergencyLevels" style="margin-left:15px;font-size:22px;width:70px;height:35px"></label>
                                        </div>

                                         <!--办理时限-->
                                         <div style="position:absolute;top:190px;left:640px">
                                             <input id="deadline" name="deadline" required validationMessage="请输入办理时限"  th:if="${#lists.contains(editControl,'deadline')}"  style="font-size:18px;width:200px;height:30px;"/>
                                             <label id="deadlines" name="deadlines" th:unless="${#lists.contains(editControl,'deadline')}"  style="font-size:15px;margin-left:15px;font-size:22px;width:200px;height:35px;"></label>
                                         </div>

                                        <!--来文摘要-->
                                        <div style="position:absolute;top:275px;left:44px">
                                            <textarea name="来文摘要"  th:if="${#lists.contains(editControl,'missiveaAbstract')}" required validationMessage="请输入来文摘要" id="missiveaAbstract" name="missiveaAbstract" style="font-size:20px;width:805px;height:138px" ></textarea>
                                            <label th:unless="${#lists.contains(editControl,'missiveaAbstract')}" id="missiveaAbstracts" name="missiveaAbstracts" style="vertical-align:middle;font-size:20px;width:805px;height:138px"></label>
                                        </div>

                                        <!--办公室拟办-->
                                        <div style="position:absolute;top:450px;left:44px;">
                                           <textarea  name="拟办内容"th:if="${#lists.contains(editControl,'officeSuggest')}" id="officeSuggest" name="officeSuggest" required validationMessage="请输入拟办内容" style="font-size:20px;width:805px;height:115px"  placeholder="请输入拟办内容..."></textarea>

                                           <label th:unless="${#lists.contains(editControl,'officeSuggest')}" id="officeSuggests" name="officeSuggests" style="font-size:20px;width:805px;height:115px"></label>
                                        </div>

                                        <!--拟办时间-->
                                         <div id="officeSuggest_Month" th:if="${#lists.contains(editControl,'officeSuggest_Month')}" style="font-size:20px;position:absolute;top:564px;left:740px;width:35px;height:30px;" naem="officeSuggest_Month"></div>
                                         <label id="officeSuggest_Months" th:unless="${#lists.contains(editControl,'officeSuggest_Month')}" style="font-size:20px;position:absolute;top:562px;left:736px;width:35px;height:30px;"></label>
                                         <div id="officeSuggest_Day"  th:if="${#lists.contains(editControl,'officeSuggest_Day')}"style="font-size:20px;position:absolute;top:564px;left:785px;width:35px;height:30px;" name="officeSuggest_Day"></div>
                                         <label id="officeSuggest_Days"th:unless="${#lists.contains(editControl,'officeSuggest_Day')}" style="font-size:20px;position:absolute;top:562px;left:785px;width:35px;height:30px;"></label>

                                        <!--领导批示-->
                                         <div style="height: 156px;width: 805px;top: 640px;left: 44px;position: absolute;">
                                             <img id="leaderInstuct_img"  name="leaderInstuct_img" style="width: 100%;height: 100%;border: none"/>
                                         </div>
                                        <div style="height: 156px;width: 805px;top: 640px;left: 44px;position: absolute;">
                                             <label id="leaderInstructBase30img" name="leaderInstructBase30img" hidden="hidden"/>
                                         </div>
                                         <div th:if="${#lists.contains(editControl, 'leaderSignArea')}" style="top: 640px;left: 44px;background:none;position: absolute;">
                                             <textarea id="leaderSignArea" name="leaderSignArea" style="height: 156px;width: 805px;position: absolute;background: none"></textarea>
                                         </div >
                                        <label th:unless="${#lists.contains(editControl, 'leaderSignArea')}" id="leaderSignAreas" style="height: 156px;width: 805px;position: absolute;top: 640px;left: 44px;background: none"></label>
                                         <div  th:if="${#lists.contains(editControl, 'leaderSignBtn')}" style="height: 20px;width: 20px;top: 612px;left: 180px;position: absolute;">
                                             <input type="button"  style="width:62px" id="leaderSignBtn" value="手写"  class="btn btn-xs btn-primary icon-edit bigger-110"
                                                    onclick="signaturePlace('signatureDiv',1440,318,'leaderInstuct_img',410,160,'leaderInstructBase30img',leaderInstructBase30url,'leaderSignArea')">
                                             </input>

                                         </div>


                                        <!--批示时间-->
                                        <div id="signMonth" th:if="${#lists.contains(editControl,'signMonth')}" name="signMonth" style="font-size:20px;position:absolute;top:797px;left:740px;width:35px;height:30px;"></div>
                                        <label id="signMonths" th:unless="${#lists.contains(editControl,'signMonth')}" style="font-size:20px;position:absolute;top:797px;left:740px;width:35px;height:30px;"></label>
                                        <div id="signDay" th:if="${#lists.contains(editControl,'signDay')}" name="signDay" style="font-size:20px;position:absolute; top:797px;left:785px;width:35px;height:30px;"></div>
                                        <label id="signDays" th:unless="${#lists.contains(editControl,'signDay')}" style="font-size:20px;position:absolute; top:797px;left:785px;width:35px;height:30px;"></label>


                                        <!--阅办人签字-->
                                        <!--<div id="lookerSignDiv" th:if="${#lists.contains(editControl,'lookerSignDiv')}">-->
                                        <div style="height: 140px;width: 805px;top: 876px;left: 44px;position: absolute;">
                                           <img id="lookSign_img" style="width: 100%;height: 100%;"/>
                                        </div>
                                        <div style="height: 140px;width: 805px;top: 876px;left: 44px;position: absolute">
                                            <label id="lookSignBase30img_sign" hidden="hidden"/>
                                        </div>
                                        <div th:if="${#lists.contains(editControl, 'lookSignArea')}"style="position: absolute;top: 876px;left: 44px;">
                                            <textarea  id="lookSignArea" style="height: 140px;width: 805px;background: none"></textarea>
                                        </div>
                                         <div th:if="${#lists.contains(editControl, 'lookSignBtn')}" style="height: 20px;width: 20px;top: 844px;left: 180px;position: absolute;">
                                             <input  type="button" style="width:62px" id="lookSignBtn" value="手写" class="btn btn-xs btn-primary"
                                                    onclick="signaturePlace('signatureDiv',1340,234,'lookSign_img',410,160,'lookSignBase30img_sign',lookerSignBase30url,'lookSignArea')">
                                             </input>
                                         </div>


                                        <!--承办情况-->
                                     <div style="height: 115px;width: 805px;top: 1050px;left: 44px;position: absolute;">
                                         <img id="undertake_img" style="width: 100%;height: 100%;"/>
                                     </div>
                                     <div style="height: 115px;width: 805px;top: 1050px;left: 44px;position: absolute;border-style:none">
                                         <label id="undertakeBase30img_sign" hidden/>
                                     </div>
                                        <div style="top: 1050px;left: 44px;position:absolute">
                                            <textarea th:if="${#lists.contains(editControl, 'undertakeArea')}" id="undertakeArea" name="undertakeArea" style="height: 115px;width: 805px;background: none"></textarea>
                                        </div>
                                        <div  th:if="${#lists.contains(editControl, 'undertakerSignBtn')}" style="height: 20px;width: 20px;top: 1025px;left: 180px;position: absolute;">
                                         <input value="手写" style="width:62px" type="button" id="undertakerSignBtn" class="btn btn-xs btn-primary"
                                                onclick="signaturePlace('signatureDiv',1340,195,'undertake_img',410,160,'undertakeBase30img_sign',undertakeBase30url,'undertakeArea')">
                                         </input>
                                     </div>


                          </div>
                         </div>
                         <table width="891px">
                             <!--Un-->
                             <tr class="trClass borderNone">
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                                 <td class="borderNone"  style="width: 16.66%;height: 0px"></td>
                             </tr>
                             <tr th:class="${#lists.contains(editControl,'attachments')}?'trClass borderNone':'hide'">
                                 <td class="borderNone" colspan="6">
                                     <div class="hr hr-double hr-dotted hr18"></div>
                                     <h3 class="header smaller lighter header-color-red">
                                         <i class="icon-cloud-upload"></i>
                                         上传附件
                                     </h3>
                                 </td>

                             </tr>
                             <tr th:class="${#lists.contains(editControl,'attachments')}?'trClass borderNone':'hide'">
                                 <td class="borderNone" colspan="6">

                                     <div class="row">
                                         <div class="col-xs-12">
                                             <div class="demo-section k-header" id="filesDIV">
                                                 <input type="file" name="files" id="attachments" />
                                             </div>
                                         </div><!-- /.col -->
                                     </div><!-- /.row -->

                                 </td>

                             </tr>
                             <tr class="trClass borderNone">
                                 <td class="borderNone" colspan="6">

                                     <div class="widget-box transparent">
                                         <div class="widget-header widget-header-small">
                                             <h4 class="blue smaller">
                                                 <i class="icon-list orange"></i>
                                                 附件
                                             </h4>

                                             <div class="widget-toolbar action-buttons">
                                                 <a href="#" data-action="collapse">
                                                     <i class="icon-chevron-up"></i>
                                                 </a>
                                             </div>
                                         </div>

                                         <div class="widget-body">
                                             <div class="widget-main padding-8" id="fileList">
                                             </div>
                                         </div>
                                     </div>
                                 </td>
                             </tr>
                             <tr class="trClass borderNone">
                                 <td class="tdClass borderNone" colspan="6">
                                     <div class="clearfix form-actions" style="min-width : 768px" >
                                         <div class="col-xs-1 col-xs-offset-2 col-sm-offset-2 col-sm-1 col-md-offset-2 col-md-1 ">
                                             <button id="completeTask" class="btn btn-info">
                                                 <i class="icon-ok bigger-110"></i>
                                                 提交
                                             </button>
                                         </div>

                                         <div class="col-xs-1 col-xs-offset-5 col-sm-offset-5 col-sm-1 col-md-offset-5 col-md-1 ">
                                             <button class="btn btn-danger" data-action="close" onclick="window.location.href='/dbzx';window.event.returnValue = false;">
                                                 <i class="icon-remove bigger-110"></i>
                                                 取消
                                             </button>
                                         </div>
                                     </div>
                                 </td>
                             </tr>
                        </table>


              </form>

      </div>
      </div>

</div><!-- /#ace-settings-container -->
</div><!-- /.main-container-inner -->

<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="icon-double-angle-up icon-only bigger-110"></i>
</a>
</div><!-- /.main-container -->

<!-- basic scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.cookie.js"></script>
<script src="/js/jquery.base64.min.js"></script>
<script src="/js/kendo.all.min.js" ></script>

<!--[if !IE]> -->

<!--<script src='/assets/js/jquery-2.0.3.min.js'></script>-->

<!-- <![endif]-->

<!--[if IE]>

<![endif]-->

<!--[if !IE]> -->

<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery-2.0.3.min.js'>"+"<"+"script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery-1.10.2.min.js'>"+"<"+"script>");
</script>
<![endif]-->

<script type="text/javascript">
    if("ontouchend" in document) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>"+"<"+"script>");
</script>

<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/typeahead-bs2.min.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="/assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="/assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="/assets/js/jquery.slimscroll.min.js"></script>
<script src="/assets/js/jquery.easy-pie-chart.min.js"></script>
<script src="/assets/js/jquery.sparkline.min.js"></script>
<script src="/assets/js/flot/jquery.flot.min.js"></script>
<script src="/assets/js/flot/jquery.flot.pie.min.js"></script>
<script src="/assets/js/flot/jquery.flot.resize.min.js"></script>
<script src="/assets/js/dropzone.min.js"></script>
<script src="/js/cultures/kendo.culture.zh-CN.min.js"></script>




<!-- ace scripts -->

<script src="/assets/js/ace-elements.min.js"></script>
<script src="/assets/js/ace.min.js"></script>

<!-- inline scripts related to this page -->



<script src="/js/jSingnature/src/jSignature.js"/>
<script src="/js/elementUseage.js"></script>
<script src="/js/console.js"></script>
<!--<script src="/js/kendo.web.min.js"></script>-->
<script src="/js/jSingnature/jSignature.wlsh.js" type="text/javascript" defer></script>
<script src="/js/jSingnature/src/plugins/jSignature.CompressorBase30.js" type="text/javascript"></script>
<script src="/js/fileList.wls.js" type="text/javascript"></script>
<script type="text/javascript" th:inline="javascript">
    var processDeId=[[${processDeId}]];//流程定义编号
    var currentEditableField=/*[[${editControl}]]*/[];

    var taskId=[[${taskId}]];//当前任务编号
    var codes =/*[[${exsistCodes}]]*/[];

    var missiveTitle="";

    var missiveReceiveForm = /*[[${missiveReceiveForm}]]*/null;
    var undertakeBase30url="";
    var lookerSignBase30url="";
    var leaderInstructBase30url="";
    var blankSignImageurl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxEAAAFjCAYAAABCEoaFAAAWB0lEQVR4Xu3XoREAAAgDMbr/0szwPuiqHOZ3jgABAgQIECBAgAABAkFgYWtKgAABAgQIECBAgACBExGegAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSQgIhKXMQECBAgQIECAAAECIsIPECBAgAABAgQIECCQBERE4jImQIAAAQIECBAgQEBE+AECBAgQIECAAAECBJKAiEhcxgQIECBAgAABAgQIiAg/QIAAAQIECBAgQIBAEhARicuYAAECBAgQIECAAAER4QcIECBAgAABAgQIEEgCIiJxGRMgQIAAAQIECBAgICL8AAECBAgQIECAAAECSUBEJC5jAgQIECBAgAABAgREhB8gQIAAAQIECBAgQCAJiIjEZUyAAAECBAgQIECAgIjwAwQIECBAgAABAgQIJAERkbiMCRAgQIAAAQIECBAQEX6AAAECBAgQIECAAIEkICISlzEBAgQIECBAgAABAiLCDxAgQIAAAQIECBAgkAREROIyJkCAAAECBAgQIEBARPgBAgQIECBAgAABAgSSgIhIXMYECBAgQIAAAQIECIgIP0CAAAECBAgQIECAQBIQEYnLmAABAgQIECBAgAABEeEHCBAgQIAAAQIECBBIAiIicRkTIECAAAECBAgQICAi/AABAgQIECBAgAABAklARCQuYwIECBAgQIAAAQIERIQfIECAAAECBAgQIEAgCYiIxGVMgAABAgQIECBAgICI8AMECBAgQIAAAQIECCQBEZG4jAkQIECAAAECBAgQEBF+gAABAgQIECBAgACBJCAiEpcxAQIECBAgQIAAAQIiwg8QIECAAAECBAgQIJAERETiMiZAgAABAgQIECBAQET4AQIECBAgQIAAAQIEkoCISFzGBAgQIECAAAECBAiICD9AgAABAgQIECBAgEASEBGJy5gAAQIECBAgQIAAARHhBwgQIECAAAECBAgQSAIiInEZEyBAgAABAgQIECAgIvwAAQIECBAgQIAAAQJJQEQkLmMCBAgQIECAAAECBESEHyBAgAABAgQIECBAIAmIiMRlTIAAAQIECBAgQICAiPADBAgQIECAAAECBAgkARGRuIwJECBAgAABAgQIEBARfoAAAQIECBAgQIAAgSTwRdcBZA2nfHIAAAAASUVORK5CYII=";//上一个流程的会签签字状态

    //文件上传
    var resultFiles=[];//存放结果文件集合
    var initFiles = [];
    var version=0;
    if(missiveReceiveForm!=null) {
        if (missiveReceiveForm.title != null) {
            missiveTitle = missiveReceiveForm.title;
        }

    }
    if(missiveReceiveForm.missiveInfo!=null){
        if(missiveReceiveForm.missiveInfo.versions[0]!=null){
            if(missiveReceiveForm.missiveInfo.versions[0].versionNumber!=0)
                version=missiveReceiveForm.missiveInfo.versions[0].versionNumber;
        }
    }
    var filePath_version=1;
    if(version==0)
        filePath_version=version+1;
    else
        filePath_version=version;
    if(missiveReceiveForm.missiveInfo!=null){
        if(missiveReceiveForm.missiveInfo.versions[0]!=null){
            if(missiveReceiveForm.missiveInfo.versions[0].attachments.length!=0){
                for(var i=0;i<missiveReceiveForm.missiveInfo.versions[0].attachments.length;i++){
                    if(missiveReceiveForm.missiveInfo.versions[0].attachments[i].isOriginalFil=false|missiveReceiveForm.missiveInfo.versions[0].attachments[i].attachmentTittle.split('.')[1]=="pdf"|missiveReceiveForm.missiveInfo.versions[0].attachments[i].attachmentTittle.split('.')[1]=="PDF") {
                        var temp = {};
                        temp.extension = "." + missiveReceiveForm.missiveInfo.versions[0].attachments[i].attachmentTittle.split('.')[1];//后缀
                        temp.name = missiveReceiveForm.missiveInfo.versions[0].attachments[i].attachmentTittle;
                        temp.size = 1;
                        initFiles.push(temp);
                    }
                }
            }
        }
    }
    resultFiles=initFiles;//将初始化的文件数字赋值给结果数据，然后将上传文件加入文件数组
    //获取用户
    var selectLeaderDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "/api/receiveMissive/getUser",
                dataType: "json"
            }
        }
    });
    var urgent_dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "/api/getUrgencyLevel",
                dataType: "json"
            }
        }
    });
    var missType_dataSource=new kendo.data.DataSource({
        transport:{
            read:{
                url:'/api/getMissiveTypes',
                dataType:'json'
            }
        }
    });
    $(function(){
        //加载背景图片
        if(missiveReceiveForm.bgPngPath!=null){
            $("#missiveReceive")[0].style.backgroundImage="url(/api/bgPng/missiveReceive/"+instanceId+")";
        }

        //紧急程度下拉框
        $("#emergencyLevel").kendoDropDownList({
            dataSource: urgent_dataSource,
            dataTextField: "value",
            dataValueField: "id"
        });
        //公文种类下拉框
        $('#missiveType').kendoDropDownList({
            dataSource: missType_dataSource,
            dataTextField: "typeName",
            dataValueField: "id"
        });
        //办理时限控件
        $('#deadline').kendoDatePicker();
        CreateSelectUserControl("selectToDo","请选择拟办人...");
        CreateSelectUserControl("selectChecker","请选择审核人...");
        CreateSelectUserControl("selectFirstLeader ","请选择批示人...");
        CreateSelectUserControl("selectDisposer ","请选择办公室处理人...");
        CreateSelectUserControl("selectFirstLooker","请选择阅办人...");
        CreateSelectUserControl("selectAfterLook ","请选择阅办处理人...");
        CreateSelectUserControl("selectNextLeader","请选择批示人...");
        CreateSelectUserControl("selectFirstUndertaker ","请选择承办人...");
        CreateSelectUserControl("selectNextLooker","请选择阅办人...");
        CreateSelectUserControl("selectNextUndertaker","请选择下一位承办人...");

            if ($("#selectNextLeader")[0]) {
                $('#selectNextLeader').data('kendoMultiSelect').enable(false);
            }

            if ($('#selectNextLooker')[0]) {
                $('#selectNextLooker').data('kendoMultiSelect').enable(false);
            }



        $("#attachments").kendoUpload({
            multiple: true,
            async: {
                saveUrl: '/missiveReceive/upload/'+instanceId,
                autoUpload: false
            },
            localization: {
                select: "选择文件....",
                uploadSelectedFiles:"上传"
            },
            success: onSuccess,
            files: initFiles
        });
        //渲染页面内容
        $.ajax({
           url:'/api/getPreContent',
            data: {instanceid: instanceId,taskid:taskId},
            success: function (result) {
                //办公室审核修改意见
                if($.trim(result.reModifyContent)!=null&& $.trim(result.reModifyContent)!=""){
                    $('#modifyDiv').attr("style","display:'';margin-top:10px");
                    $('#modifyContentL').html(result.reModifyContent);
                    $('#missiveTitle').val(result.title);
                    $('#missiveNum').val(result.missiveNumber);
                    $('#missiveCount').val(result.fileCount);
                    $('#deadline').val(result.dealDeadline);
                    $('#M_receiveNum').val(result.code);
                    $('#missiveaAbstract').val(result.missiveAbstract);
                }
                else if($.trim(result.toModifyContent)!=null&& $.trim(result.toModifyContent)!=""){
                    $('#modifyToDoDiv').attr("style","display:'';height:50px");
                    $('#toDoModifyContentL').html(result.toModifyContent);
                    $('#officeSuggest').html(result.officeToDo);
                }

                $('#receiveYears').html(result.receiveYear);//收文年
                $('#receiveYear').html(result.receiveYear);//收文年
                $('#receiveMonths').html(result.receiveMonth);//收文月
                $('#receiveMonth').html(result.receiveMonth);//收文月
                $('#receiveDays').html(result.receiveDay);//收文日
                $('#receiveDay').html(result.receiveDay);//收文日

                $('#M_receiveNums').html(result.code);//收文号
                $('#missiveNums').html(result.missiveNumber);//文件字号
                $('#missiveCounts').html(result.fileCount);//文件份数
                if (result.urgencyLevel != null) {
                     $('#emergencyLevels').html(result.urgencyLevel.value);//紧急程度
                }
                $('#deadlines').html(result.dealDeadline);//办理时限
                if(result.missiveAbstract!=null&&result.missiveAbstract!="")
                {
                     $('#missiveaAbstracts').html(result.missiveAbstract);
                }//来问摘要
                //渲染的页面内容分已经完成的和未完成的
                if(result.officeToDo!=null) {
                    $('#officeSuggests').html(result.officeToDo);//办公室拟办
                    $('#officeSuggest').html(result.officeToDo);
                }


                $('#officeSuggest_Month').html(result.toDoDateMonth);//办公室拟办月
                $('#officeSuggest_Months').html(result.toDoDateMonth);//办公室拟办月
                $('#officeSuggest_Day').html(result.toDoDateDay);//办公室拟办日
                $('#officeSuggest_Days').html(result.toDoDateDay);//办公室拟办日

                if(result.leaderInstruct!=null){
                    var Imageurl=result.leaderInstruct.Imageurl;
                    if(Imageurl!="") {
                        $('#leaderInstuct_img')[0].src=Imageurl;
                    }
                    else{
                        $('#leaderInstuct_img')[0].src=blankSignImageurl;
                    }
                   var Base30url=result.leaderInstruct.Base30url;
                    if(Base30url!="") {
                        $('#leaderInstructBase30img')[0].value =Base30url;
                        leaderInstructBase30url=Base30url;

                    }
                    /*var instructText = result.leaderInstruct.contentText;
                    if($('#leaderSignArea')[0]){
                        $('#leaderSignArea').value=instructText;
                    }
                    else{
                        $('#leaderSignAreas').html=instructText;
                    }*/

                }
               else{
                    $('#leaderInstuct_img')[0].src=blankSignImageurl;
                }

                $('#signMonth').html(result.instructDateMonth);//批示月
                $('#signMonths').html(result.instructDateMonth);//批示月
                $('#signDay').html(result.instructDateDay);//批示日
                $('#signDays').html(result.instructDateDay);//批示日

               ;//阅办人签字
                if(result.lookerSign!=null&&result.lookerSign!="")
                {
                    var lookSign_img=result.lookerSign.Imageurl;
                    if(lookSign_img!=""){
                        $('#lookSign_img')[0].src=lookSign_img;
                    }
                    else{

                        $('#lookSign_img')[0].src=blankSignImageurl;
                    }
                    var lookSignBase30img_sign=result.lookerSign.Base30url;
                    if(lookSignBase30img_sign!=""){
                        $('#lookSignBase30img_sign')[0].value=lookSignBase30img_sign;
                        lookerSignBase30url=lookSignBase30img_sign;
                    }
                }
                else{
                    $('#lookSign_img')[0].src=blankSignImageurl;
                }
                //承办人签字
                if(result.undertake!=null)
                {
                    var undertake_img=result.undertake.Imageurl;
                    if(undertake_img!=""){
                        $('#undertake_img')[0].src=undertake_img;
                    }
                    else{
                        $('#undertake_img')[0].src=blankSignImageurl;
                    }
                    var undertakeBase30img_sign=result.undertake.Base30url;
                    if(undertakeBase30img_sign!=null){
                        $('#undertakeBase30img_sign')[0].value=undertakeBase30img_sign;
                        undertakeBase30url=undertakeBase30img_sign;
                    }
                }
                else{
                    $('#undertake_img')[0].src=blankSignImageurl;
                }

                $('#undertakeSituation').html(result.undertake);//承办情况
                /*if(result.taskDealer.OfficeHandle!=null&&result.taskDealer.OfficeHandle!="")
                {
                    $('#selectToDo').data('kendoMultiSelect').value(result.taskDealer.OfficeHandle);
                }
*/
            },
            error:function(){
                alert('error');
            }
        });
        //紧急程度下拉框
        $("#emergencyLevel").kendoDropDownList({
            dataSource: urgent_dataSource,
            dataTextField: "value",
            dataValueField: "id"
        });

        for(var i=0;i<resultFiles.length;i++){
            var temp=resultFiles[i];
            //-------add list of attachments--->>>>>
            fileListCreate("fileList",temp,"attachments","filesDIV",currentEditableField);
        }

        //表单验证
        var validator = $('#receiveForm').kendoValidator().data("kendoValidator");
        //选择用户下拉框
        $('#completeTask').bind('click',function(){
           if(validator.validate()) {
               var receiveNum = $('#M_receiveNum').val() == undefined ? "" : $('#M_receiveNum').val();
               var deadline = $('#deadline').val() == undefined ? "" : $('#deadline').val();
               if ($.inArray(receiveNum,codes) == -1) {
                   //任务执行人
                   var selectToDo = $("#selectToDo").val() == undefined ? "" : $("#selectToDo").val()[0];//拟办人
                   var selectChecker = $("#selectChecker").val() == undefined ? "" : $("#selectChecker").val()[0];//办公室审核人
                   var selectFirstLeader = $("#selectFirstLeader").val() == undefined ? "" : $("#selectFirstLeader").val()[0];//批示领导
                   var selectDisposer = $("#selectDisposer").val() == undefined ? "" : $("#selectDisposer").val()[0];//办公室处理人
                   var selectFirstLooker = $("#selectFirstLooker").val() == undefined ? "" : $("#selectFirstLooker").val()[0];//阅办人
                   var selectAfterLook = $("#selectAfterLook").val() == undefined ? "" : $("#selectAfterLook").val()[0];//阅办后处理人
                   var selectNextLeader = $("#selectNextLeader").val() == undefined ? "" : $("#selectNextLeader").val()[0];//下一位批示领导
                   var selectFirstUndertaker = $("#selectFirstUndertaker").val() == undefined ? "" : $("#selectFirstUndertaker").val()[0];//承办人
                   var selectNextLooker = $("#selectNextLooker").val() == undefined ? "" : $("#selectNextLooker").val()[0];//下一位阅办人
                   var selectNextUndertaker = $("#selectNextUndertaker").val() == undefined ? "" : $("#selectNextUndertaker").val()[0];//下一位承办人

                   var signLeader = selectFirstLeader == "" ? selectNextLeader : selectFirstLeader;
                   var signLooker = selectFirstLooker == "" ? selectNextLooker : selectFirstLooker;
                   var signUndertaker = selectFirstUndertaker == "" ? selectNextUndertaker : selectFirstUndertaker;

                   //公文标题、类型、任务完成标识
                   var title = $('#missiveTitle').val() == undefined ? "" : $('#missiveTitle').val();
                   var missiveType = $('#missiveType').val() == undefined ? "" : $('#missiveType').val();
                   var taskIndex = $("input[name='passor']:checked").val() == undefined ? "" : $("input[name='passor']:checked").val();

                   //收文年月日
                   var receiveYear = $('#receiveYear').html() == undefined ? "" : $('#receiveYear').html();
                   var receiveMonth = $('#receiveMonth').html() == undefined ? "" : $('#receiveMonth').html();
                   var receiveDay = $('#receiveDay').html() == undefined ? "" : $('#receiveDay').html();

                   //收文号、文件字号、文件份数

                   var missiveNum = $('#missiveNum').val() == undefined ? "" : $('#missiveNum').val();
                   var missiveCount = $('#missiveCount').val() == undefined ? "" : $('#missiveCount').val();

                   //紧急程度、办理期限、来文摘要
                   var emergencyLevel = $('#emergencyLevel').val() == undefined ? "" : $('#emergencyLevel').val();

                   var missiveAbstract = $('#missiveaAbstract').val() == undefined ? "" : $('#missiveaAbstract').val();

                   //办公室登记、拟办修改意见
                   var registerModify = $('#regModifyContentT').val() == undefined ? "" : $('#regModifyContentT').val();
                   var toDoModify = $('#toDoModifyContentT').val() == undefined ? "" : $('#toDoModifyContentT').val();

                   //拟办内容、拟办月日
                   var officeToDo = $('#officeSuggest').val() == undefined ? "" : $('#officeSuggest').val();
                   var toDoMonth = $('#officeSuggest_Month').html() == undefined ? "" : $('#officeSuggest_Month').html();
                   var toDoDay = $('#officeSuggest_Day').html() == undefined ? "" : $('#officeSuggest_Day').html();

                   //领导批示
                   var leaderInstruct_img = $("#leaderInstuct_img")[0].src == undefined ? "" : $("#leaderInstuct_img")[0].src;
                   var leaderInstructBase30img = $("#leaderInstructBase30img")[0].value == undefined ? "" : $("#leaderInstructBase30img")[0].value;
                   var leaderSignArea = $('#leaderSignArea').val() == undefined ? "" : $('#leaderSignArea').val();

                   //批示月、日
                   var instructMonth = $('#signMonth').html() == undefined ? "" : $('#signMonth').html();
                   var instructDay = $('#signDay').html() == undefined ? "" : $('#signDay').html();

                   //阅办人签字
                   var lookSign_img = $('#lookSign_img')[0].src == undefined ? "" : $('#lookSign_img')[0].src;
                   var lookSignBase30img_sign = $('#lookSignBase30img_sign')[0].value == undefined ? "" : $('#lookSignBase30img_sign')[0].value;
                   var lookSignArea = $('#lookSignArea').val() == undefined ? "" : $('#lookSignArea').val();

                   //承办人签字
                   var undertake_img = $('#undertake_img')[0].src == undefined ? "" : $('#undertake_img')[0].src;
                   var undertakeBase30img_sign = $('#undertakeBase30img_sign')[0].value == undefined ? "" : $('#undertakeBase30img_sign')[0].value;
                   var undertakeArea = $('#undertakeArea').val() == undefined ? "" : $('#undertakeArea').val();

                   //保存公文的附件信息
                   var attachFiles = "";
                   for (var i = 0; i < resultFiles.length; i++) {
                       attachFiles += resultFiles[i].name + "&";
                   }

                   var missiveReceiveFormDataObj = {
                       Handle: selectToDo,
                       ChargerCheck: selectChecker,
                       LeaderSign: signLeader,
                       OfficeDispose: selectDisposer,
                       Reado: signLooker,
                       ReadoDispose: selectAfterLook,
                       UndertakeDispose: signUndertaker,
                       mTitle: title,
                       mType: missiveType,
                       mTaskIndex: taskIndex,
                       mReceiveYear: receiveYear,
                       mReceiveMonth: receiveMonth,
                       mReceiveDay: receiveDay,
                       mReceiveNum: receiveNum,
                       mMissiveNum: missiveNum,
                       mMissiveCount: missiveCount,
                       mEmergencyLevel: emergencyLevel,
                       mDeadline: deadline,
                       mMissiveAbstract: missiveAbstract,
                       mRegisterModify: registerModify,
                       mToDoModify: toDoModify,
                       mOfficeToDo: officeToDo,
                       mToDoMonth: toDoMonth,
                       mToDoDay: toDoDay,
                       mLeaderInstruct_img: leaderInstruct_img,
                       mLeaderInstructBase30img: leaderInstructBase30img,
                       mLeaderSignArea: leaderSignArea,
                       mInstructMonth: instructMonth,
                       mInstructDay: instructDay,
                       mLookSign_img: lookSign_img,
                       mLookSignBase30img_sign: lookSignBase30img_sign,
                       mLookSignArea: lookSignArea,
                       mUndertake_img: undertake_img,
                       mUndertakeBase30img_sign: undertakeBase30img_sign,
                       mUndertakeArea: undertakeArea,
                       mUploadAttach: attachFiles
                   };

                   $.ajax({
                       url: '/api/submitFormContent/' + instanceId + "/" + taskId,
                       type: 'post',
                       async:false,
                       data: {formData: JSON.stringify(missiveReceiveFormDataObj)},
                       beforeSend: function (req) {
                           req.setRequestHeader('Authorization', $.cookie('userbase64'));
                       },
                       success: function () {
                           alert("任务完成成功！");
                           window.location.href = "/dbzx";
                           window.event.returnValue = false;
                       },
                       error: function () {
                          alert("任务完成失败！,请再次提交！");
                       }
                   });
               }
               else{
                   alert("收文号已存在！");
               }

               }
          else {
                   alert("请输入必填信息！");
               }
        });
    });


    //选择文件时触发事件
    function onSelect(e) {

    }
    //上传文件成功时触发事件
    function onSuccess(e) {
        // Array with information about the uploaded files
        var files = e.files;
        //将上传的文件写入到resultFiles数组中

        if(e.operation=="upload"){
            if (e.response == true) {
                addObjFromObj(e);//添加文件信息到文件数组
            }
        }else{
            if (e.response == true) {
                //初始文件对象中删除指定对象
                delObjFromObj(e);
            }
        }
        if(missiveTitle!="") {//如果流程不是首次创建，则有公文名存在，则版本需要+1；否则公文版本不变
            filePath_version = version + 1;
        }

        $("#fileList").empty();
        for(var i=0;i<resultFiles.length;i++){
            var temp = resultFiles[i];


                //-------add list of attachments--->>>>>
                fileListCreate("fileList", temp, "attachments", "filesDIV", currentEditableField);

        }

    }
    //初始文件对象中增加上传文件对象
    function addObjFromObj(e){
        var files= e.files[0];

        var fileName = e.files[0].name;
        resultFiles=resultFiles.filter(function(el){
            return el.name!==fileName;
        });

        var temp={};
        temp.name= files.name;//文件名
        temp.extension=files.extension;//后缀名
        resultFiles.push(temp);
        var hide_span_file=$("span[class='k-filename'][title='"+e.files[0].name+"']");
        for(var span_file_i=0;span_file_i<hide_span_file.length;span_file_i++){
            $(hide_span_file[span_file_i]).parent()[0].setAttribute("class","hide");
        }
    }
    function fileListCreate(fileListDiv_id,file,attachment_id,attachmentparent_id,editableElementList){
        //fileListDiv_id--文件列表的id
        //file：文件{name;extension;size}
        //attachment_id:附件控件的id   //其必须有父级元素
        //attachmentparent_id:父级元素
        //editableElementList：当前可编辑控件集合的数组
        //pdfViewerURL:pdf浏览器URL
        //fileURL：文件下载的URL
        //fileUploadUrl  文件上传的URL//'/missivePublish/upload/'+instanceID,
        //fileRemoveURL;文件删除的URL// "/missivePublish/remove/"+instanceID;

        var tempname = file.name;
        var start=tempname.lastIndexOf(".")+1;
        var end =tempname.length
        var suffix= tempname.substring(start,end);
        if(suffix=="doc"||suffix=="docx"||suffix=="ppt"||suffix=="pptx"||suffix=="xls"||suffix=="xlsx"||suffix=="pdf"||suffix=="PDF") {
            var pdfViewerURL="/pdfViewer/web/viewer.html?file=";
            var fileURL="/pdf/missiveReceive/"+instanceId+"/"+filePath_version+"/"+file.name;
            var fileRemoveURL = "/missiveReceive/remove/"+instanceId;
            var fileUploadUrl="/missiveReceive/upload/"+instanceId;
            createFileListElement(fileListDiv_id, file, attachment_id, attachmentparent_id, editableElementList, pdfViewerURL, fileURL, fileUploadUrl, fileRemoveURL);
        }
        else{
            alert("不支持上传doc、docx、ppt、pptx、xls、xlsx、pdf类型以外的文件！");
        }
    }


    //创建选择用户的下拉控件
    function CreateSelectUserControl(ControlId,placeholderContent){
        $('#'+ControlId).kendoMultiSelect({
            maxSelectedItems:1,
            theme: "[bootstrap]",
            placeholder: placeholderContent,
            dataTextField: "Name",
            dataValueField: "userName",
            autoBind: false,
            dataSource:selectLeaderDataSource,
            tagTemplate:'#: Name #'
        });
    }
     //手写
    function signaturePlace(divName,width,height,imgDivName,imgWidth,imgHeight,imgUrlForSave,signBase30Url_Previous,textareaID){
       /*
        divName:需要弹出并用来签名的div名称
        width：需要进行签名div的width
        height：需要进行签名div的height
        imgDivName：导出生成图片的div名称
        imgID:生成图片的ID
        imgWidth：导出生成图片的div的width
        imgHeight：导出生成图片的div的height
        imgUrlForSave:用来保存signature的base30格式的lable的ID
        signBase30Url_Previous:前一个签字的base30编码
        signBase30Url_Editer:本次签字的base30编码
        textareaID */
       var signBase30Url_Editer;

       try{
           signBase30Url_Editer=$("#"+imgUrlForSave)[0].value;
       }
       catch(error){
           console.log(error);
       }
       openSignatureWindow(divName,width,height,imgDivName,imgWidth,imgHeight,imgUrlForSave,signBase30Url_Editer,signBase30Url_Previous,textareaID);
   }



</script>


</body>
</html>

